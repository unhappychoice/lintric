---
source: crates/core/tests/integration/language/rust/mod.rs
expression: ir_snapshot_content
---
Source Code:
fn main() {
    let add_one = |x| {
        x + 1;
    };
    let y = 2;
    add_one(y);
}


AST:
(source_file
  (function_item
    name: (identifier "main")
    parameters: (parameters)
    body: (block
      (let_declaration
        pattern: (identifier "add_one")
        value: (closure_expression
          parameters: (closure_parameters
            (identifier "x")
          )
          body: (block
            (expression_statement
              (binary_expression
                left: (identifier "x")
                right: (integer_literal "1")
              )
            )
          )
        )
      )
      (let_declaration
        pattern: (identifier "y")
        value: (integer_literal "2")
      )
      (expression_statement
        (call_expression
          function: (identifier "add_one")
          arguments: (arguments
            (identifier "y")
          )
        )
      )
    )
  )
)

IR:
IntermediateRepresentation {
    file_path: "tests/integration/language/rust/fixtures/closure_dependency.rs",
    definitions: [
        Definition { position: { 1:4 to 1:8 }, name: "main", definition_type: FunctionDefinition, scope_id: Some(1), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
        Definition { position: { 2:9 to 2:16 }, name: "add_one", definition_type: VariableDefinition, scope_id: Some(2), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
        Definition { position: { 2:20 to 2:21 }, name: "x", definition_type: VariableDefinition, scope_id: Some(3), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
        Definition { position: { 5:9 to 5:10 }, name: "y", definition_type: VariableDefinition, scope_id: Some(2), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
    ],
    dependencies: [
        Dependency { source_line: 3, target_line: 2, symbol: "x", dependency_type: VariableUse, context: Some("Identifier:3:9") },
        Dependency { source_line: 6, target_line: 2, symbol: "add_one", dependency_type: FunctionCall, context: Some("CallExpression:6:5") },
        Dependency { source_line: 6, target_line: 5, symbol: "y", dependency_type: VariableUse, context: Some("Identifier:6:13") },
    ],
    usage: [
        Usage { position: { 3:9 to 3:10 }, name: "x", kind: Identifier, context: None },
        Usage { position: { 6:5 to 6:15 }, name: "add_one", kind: CallExpression, context: Some("call_expression") },
        Usage { position: { 6:13 to 6:14 }, name: "y", kind: Identifier, context: Some("call_expression") },
    ],
    analysis_metadata: AnalysisMetadata {
        language: "Rust",
        total_lines: 7,
        analysis_timestamp: "now",
        lintric_version: "0.1.0",
    },
}
