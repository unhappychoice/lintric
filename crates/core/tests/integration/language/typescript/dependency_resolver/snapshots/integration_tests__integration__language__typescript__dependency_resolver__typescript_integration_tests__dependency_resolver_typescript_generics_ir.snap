---
source: crates/core/tests/integration/language/typescript/dependency_resolver/typescript_integration_tests.rs
expression: ir_snapshot_content
---
Source Code:
interface Repository<T> {
    save(item: T): void;
    findById(id: string): T | null;
}

class UserRepository implements Repository<User> {
    private users: User[] = [];
    
    save(user: User): void {
        this.users.push(user);
    }
    
    findById(id: string): User | null {
        return this.users.find(u => u.id === id) || null;
    }
}

interface User {
    id: string;
    name: string;
}

function processItems<T>(items: T[]): T[] {
    return items.filter(item => item !== null);
}

function main() {
    const repo = new UserRepository();
    repo.save({ id: "1", name: "John" });
    
    const user = repo.findById("1");
    const users = [user];
    const filtered = processItems(users);
}

AST:
(program
  (interface_declaration
    name: (type_identifier "Repository")
    type_parameters: (type_parameters
      (type_parameter
        name: (type_identifier "T")
      )
    )
    body: (interface_body
      (method_signature
        name: (property_identifier "save")
        parameters: (formal_parameters
          (required_parameter
            pattern: (identifier "item")
            type: (type_annotation
              (type_identifier "T")
            )
          )
        )
        return_type: (type_annotation
          (predefined_type "void")
        )
      )
      (method_signature
        name: (property_identifier "findById")
        parameters: (formal_parameters
          (required_parameter
            pattern: (identifier "id")
            type: (type_annotation
              (predefined_type "string")
            )
          )
        )
        return_type: (type_annotation
          (union_type
            (type_identifier "T")
            (literal_type
              (null "null")
            )
          )
        )
      )
    )
  )
  (class_declaration
    name: (type_identifier "UserRepository")
    (class_heritage
      (implements_clause
        (generic_type
          name: (type_identifier "Repository")
          type_arguments: (type_arguments
            (type_identifier "User")
          )
        )
      )
    )
    body: (class_body
      (public_field_definition
        (accessibility_modifier "private")
        name: (property_identifier "users")
        type: (type_annotation
          (array_type
            (type_identifier "User")
          )
        )
        value: (array)
      )
      (method_definition
        name: (property_identifier "save")
        parameters: (formal_parameters
          (required_parameter
            pattern: (identifier "user")
            type: (type_annotation
              (type_identifier "User")
            )
          )
        )
        return_type: (type_annotation
          (predefined_type "void")
        )
        body: (statement_block
          (expression_statement
            (call_expression
              function: (member_expression
                object: (member_expression
                  object: (this "this")
                  property: (property_identifier "users")
                )
                property: (property_identifier "push")
              )
              arguments: (arguments
                (identifier "user")
              )
            )
          )
        )
      )
      (method_definition
        name: (property_identifier "findById")
        parameters: (formal_parameters
          (required_parameter
            pattern: (identifier "id")
            type: (type_annotation
              (predefined_type "string")
            )
          )
        )
        return_type: (type_annotation
          (union_type
            (type_identifier "User")
            (literal_type
              (null "null")
            )
          )
        )
        body: (statement_block
          (return_statement
            (binary_expression
              left: (call_expression
                function: (member_expression
                  object: (member_expression
                    object: (this "this")
                    property: (property_identifier "users")
                  )
                  property: (property_identifier "find")
                )
                arguments: (arguments
                  (arrow_function
                    parameter: (identifier "u")
                    body: (binary_expression
                      left: (member_expression
                        object: (identifier "u")
                        property: (property_identifier "id")
                      )
                      right: (identifier "id")
                    )
                  )
                )
              )
              right: (null "null")
            )
          )
        )
      )
    )
  )
  (interface_declaration
    name: (type_identifier "User")
    body: (interface_body
      (property_signature
        name: (property_identifier "id")
        type: (type_annotation
          (predefined_type "string")
        )
      )
      (property_signature
        name: (property_identifier "name")
        type: (type_annotation
          (predefined_type "string")
        )
      )
    )
  )
  (function_declaration
    name: (identifier "processItems")
    type_parameters: (type_parameters
      (type_parameter
        name: (type_identifier "T")
      )
    )
    parameters: (formal_parameters
      (required_parameter
        pattern: (identifier "items")
        type: (type_annotation
          (array_type
            (type_identifier "T")
          )
        )
      )
    )
    return_type: (type_annotation
      (array_type
        (type_identifier "T")
      )
    )
    body: (statement_block
      (return_statement
        (call_expression
          function: (member_expression
            object: (identifier "items")
            property: (property_identifier "filter")
          )
          arguments: (arguments
            (arrow_function
              parameter: (identifier "item")
              body: (binary_expression
                left: (identifier "item")
                right: (null "null")
              )
            )
          )
        )
      )
    )
  )
  (function_declaration
    name: (identifier "main")
    parameters: (formal_parameters)
    body: (statement_block
      (lexical_declaration
        (variable_declarator
          name: (identifier "repo")
          value: (new_expression
            constructor: (identifier "UserRepository")
            arguments: (arguments)
          )
        )
      )
      (expression_statement
        (call_expression
          function: (member_expression
            object: (identifier "repo")
            property: (property_identifier "save")
          )
          arguments: (arguments
            (object
              (pair
                key: (property_identifier "id")
                value: (string
                  (string_fragment)
                )
              )
              (pair
                key: (property_identifier "name")
                value: (string
                  (string_fragment)
                )
              )
            )
          )
        )
      )
      (lexical_declaration
        (variable_declarator
          name: (identifier "user")
          value: (call_expression
            function: (member_expression
              object: (identifier "repo")
              property: (property_identifier "findById")
            )
            arguments: (arguments
              (string
                (string_fragment)
              )
            )
          )
        )
      )
      (lexical_declaration
        (variable_declarator
          name: (identifier "users")
          value: (array
            (identifier "user")
          )
        )
      )
      (lexical_declaration
        (variable_declarator
          name: (identifier "filtered")
          value: (call_expression
            function: (identifier "processItems")
            arguments: (arguments
              (identifier "users")
            )
          )
        )
      )
    )
  )
)

IR:
IntermediateRepresentation {
    file_path: "tests/integration/language/typescript/dependency_resolver/fixtures/typescript_generics.ts",
    definitions: [
        Definition { position: { 1:11 to 1:21 }, name: "Repository", definition_type: InterfaceDefinition, scope_id: Some(1), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
        Definition { position: { 1:22 to 1:23 }, name: "T", definition_type: TypeDefinition, scope_id: Some(1), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
        Definition { position: { 2:5 to 2:9 }, name: "save", definition_type: MethodDefinition, scope_id: Some(1), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
        Definition { position: { 3:5 to 3:13 }, name: "findById", definition_type: MethodDefinition, scope_id: Some(1), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
        Definition { position: { 6:7 to 6:21 }, name: "UserRepository", definition_type: ClassDefinition, scope_id: Some(2), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
        Definition { position: { 7:13 to 7:18 }, name: "users", definition_type: PropertyDefinition, scope_id: Some(2), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
        Definition { position: { 9:5 to 9:9 }, name: "save", definition_type: MethodDefinition, scope_id: Some(3), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
        Definition { position: { 9:10 to 9:14 }, name: "user", definition_type: VariableDefinition, scope_id: Some(3), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
        Definition { position: { 13:5 to 13:13 }, name: "findById", definition_type: MethodDefinition, scope_id: Some(4), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
        Definition { position: { 13:14 to 13:16 }, name: "id", definition_type: VariableDefinition, scope_id: Some(4), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
        Definition { position: { 18:11 to 18:15 }, name: "User", definition_type: InterfaceDefinition, scope_id: Some(6), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
        Definition { position: { 19:5 to 19:7 }, name: "id", definition_type: PropertyDefinition, scope_id: Some(6), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
        Definition { position: { 20:5 to 20:9 }, name: "name", definition_type: PropertyDefinition, scope_id: Some(6), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
        Definition { position: { 23:10 to 23:22 }, name: "processItems", definition_type: FunctionDefinition, scope_id: Some(7), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
        Definition { position: { 23:23 to 23:24 }, name: "T", definition_type: TypeDefinition, scope_id: Some(7), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
        Definition { position: { 23:26 to 23:31 }, name: "items", definition_type: VariableDefinition, scope_id: Some(7), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
        Definition { position: { 27:10 to 27:14 }, name: "main", definition_type: FunctionDefinition, scope_id: Some(9), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
        Definition { position: { 28:11 to 28:15 }, name: "repo", definition_type: VariableDefinition, scope_id: Some(9), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
        Definition { position: { 31:11 to 31:15 }, name: "user", definition_type: VariableDefinition, scope_id: Some(9), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
        Definition { position: { 32:11 to 32:16 }, name: "users", definition_type: VariableDefinition, scope_id: Some(9), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
        Definition { position: { 33:11 to 33:19 }, name: "filtered", definition_type: VariableDefinition, scope_id: Some(9), accessibility: Some(ScopeLocal), is_hoisted: Some(false) },
    ],
    dependencies: [
        Dependency { source_line: 2, target_line: 1, symbol: "T", dependency_type: TypeReference, context: Some("TypeIdentifier:2:16") },
        Dependency { source_line: 3, target_line: 1, symbol: "T", dependency_type: TypeReference, context: Some("TypeIdentifier:3:27") },
        Dependency { source_line: 6, target_line: 1, symbol: "Repository", dependency_type: TypeReference, context: Some("TypeIdentifier:6:33") },
        Dependency { source_line: 6, target_line: 18, symbol: "User", dependency_type: TypeReference, context: Some("TypeIdentifier:6:44") },
        Dependency { source_line: 7, target_line: 18, symbol: "User", dependency_type: TypeReference, context: Some("TypeIdentifier:7:20") },
        Dependency { source_line: 9, target_line: 18, symbol: "User", dependency_type: TypeReference, context: Some("TypeIdentifier:9:16") },
        Dependency { source_line: 10, target_line: 7, symbol: "users", dependency_type: StructFieldAccess, context: Some("field_access") },
        Dependency { source_line: 10, target_line: 9, symbol: "user", dependency_type: VariableUse, context: Some("Identifier:10:25") },
        Dependency { source_line: 13, target_line: 18, symbol: "User", dependency_type: TypeReference, context: Some("TypeIdentifier:13:27") },
        Dependency { source_line: 14, target_line: 7, symbol: "users", dependency_type: StructFieldAccess, context: Some("field_access") },
        Dependency { source_line: 14, target_line: 19, symbol: "id", dependency_type: StructFieldAccess, context: Some("field_access") },
        Dependency { source_line: 14, target_line: 13, symbol: "id", dependency_type: VariableUse, context: Some("Identifier:14:46") },
        Dependency { source_line: 24, target_line: 23, symbol: "items", dependency_type: VariableUse, context: Some("Identifier:24:12") },
        Dependency { source_line: 28, target_line: 6, symbol: "UserRepository", dependency_type: VariableUse, context: Some("Identifier:28:22") },
        Dependency { source_line: 29, target_line: 28, symbol: "repo", dependency_type: VariableUse, context: Some("Identifier:29:5") },
        Dependency { source_line: 29, target_line: 9, symbol: "save", dependency_type: StructFieldAccess, context: Some("FieldExpression:29:10") },
        Dependency { source_line: 29, target_line: 19, symbol: "id", dependency_type: StructFieldAccess, context: Some("field_access") },
        Dependency { source_line: 29, target_line: 20, symbol: "name", dependency_type: StructFieldAccess, context: Some("field_access") },
        Dependency { source_line: 31, target_line: 28, symbol: "repo", dependency_type: VariableUse, context: Some("Identifier:31:18") },
        Dependency { source_line: 31, target_line: 13, symbol: "findById", dependency_type: StructFieldAccess, context: Some("FieldExpression:31:23") },
        Dependency { source_line: 32, target_line: 31, symbol: "user", dependency_type: VariableUse, context: Some("Identifier:32:20") },
        Dependency { source_line: 33, target_line: 23, symbol: "processItems", dependency_type: FunctionCall, context: Some("CallExpression:33:22") },
        Dependency { source_line: 33, target_line: 32, symbol: "users", dependency_type: VariableUse, context: Some("Identifier:33:35") },
    ],
    usage: [
        Usage { position: { 2:5 to 2:9 }, name: "save", kind: FieldExpression, context: None },
        Usage { position: { 2:16 to 2:17 }, name: "T", kind: TypeIdentifier, context: None },
        Usage { position: { 3:5 to 3:13 }, name: "findById", kind: FieldExpression, context: None },
        Usage { position: { 3:27 to 3:28 }, name: "T", kind: TypeIdentifier, context: None },
        Usage { position: { 6:33 to 6:43 }, name: "Repository", kind: TypeIdentifier, context: None },
        Usage { position: { 6:44 to 6:48 }, name: "User", kind: TypeIdentifier, context: None },
        Usage { position: { 7:13 to 7:18 }, name: "users", kind: FieldExpression, context: None },
        Usage { position: { 7:20 to 7:24 }, name: "User", kind: TypeIdentifier, context: None },
        Usage { position: { 9:5 to 9:9 }, name: "save", kind: FieldExpression, context: None },
        Usage { position: { 9:16 to 9:20 }, name: "User", kind: TypeIdentifier, context: None },
        Usage { position: { 10:9 to 10:30 }, name: "this.users.push", kind: CallExpression, context: Some("call_expression") },
        Usage { position: { 10:14 to 10:19 }, name: "users", kind: FieldExpression, context: Some("call_expression") },
        Usage { position: { 10:20 to 10:24 }, name: "push", kind: FieldExpression, context: Some("call_expression") },
        Usage { position: { 10:25 to 10:29 }, name: "user", kind: Identifier, context: Some("call_expression") },
        Usage { position: { 13:5 to 13:13 }, name: "findById", kind: FieldExpression, context: None },
        Usage { position: { 13:27 to 13:31 }, name: "User", kind: TypeIdentifier, context: None },
        Usage { position: { 14:16 to 14:49 }, name: "this.users.find", kind: CallExpression, context: Some("call_expression") },
        Usage { position: { 14:21 to 14:26 }, name: "users", kind: FieldExpression, context: Some("call_expression") },
        Usage { position: { 14:27 to 14:31 }, name: "find", kind: FieldExpression, context: Some("call_expression") },
        Usage { position: { 14:32 to 14:33 }, name: "u", kind: Identifier, context: Some("call_expression") },
        Usage { position: { 14:37 to 14:38 }, name: "u", kind: Identifier, context: Some("call_expression") },
        Usage { position: { 14:39 to 14:41 }, name: "id", kind: FieldExpression, context: Some("call_expression") },
        Usage { position: { 14:46 to 14:48 }, name: "id", kind: Identifier, context: Some("call_expression") },
        Usage { position: { 19:5 to 19:7 }, name: "id", kind: FieldExpression, context: None },
        Usage { position: { 20:5 to 20:9 }, name: "name", kind: FieldExpression, context: None },
        Usage { position: { 23:33 to 23:34 }, name: "T", kind: TypeIdentifier, context: None },
        Usage { position: { 23:39 to 23:40 }, name: "T", kind: TypeIdentifier, context: None },
        Usage { position: { 24:12 to 24:47 }, name: "items.filter", kind: CallExpression, context: Some("call_expression") },
        Usage { position: { 24:12 to 24:17 }, name: "items", kind: Identifier, context: Some("call_expression") },
        Usage { position: { 24:18 to 24:24 }, name: "filter", kind: FieldExpression, context: Some("call_expression") },
        Usage { position: { 24:25 to 24:29 }, name: "item", kind: Identifier, context: Some("call_expression") },
        Usage { position: { 24:33 to 24:37 }, name: "item", kind: Identifier, context: Some("call_expression") },
        Usage { position: { 28:22 to 28:36 }, name: "UserRepository", kind: Identifier, context: None },
        Usage { position: { 29:5 to 29:41 }, name: "repo.save", kind: CallExpression, context: Some("call_expression") },
        Usage { position: { 29:5 to 29:9 }, name: "repo", kind: Identifier, context: Some("call_expression") },
        Usage { position: { 29:10 to 29:14 }, name: "save", kind: FieldExpression, context: Some("call_expression") },
        Usage { position: { 29:17 to 29:19 }, name: "id", kind: FieldExpression, context: Some("call_expression") },
        Usage { position: { 29:26 to 29:30 }, name: "name", kind: FieldExpression, context: Some("call_expression") },
        Usage { position: { 31:18 to 31:36 }, name: "repo.findById", kind: CallExpression, context: Some("call_expression") },
        Usage { position: { 31:18 to 31:22 }, name: "repo", kind: Identifier, context: Some("call_expression") },
        Usage { position: { 31:23 to 31:31 }, name: "findById", kind: FieldExpression, context: Some("call_expression") },
        Usage { position: { 32:20 to 32:24 }, name: "user", kind: Identifier, context: None },
        Usage { position: { 33:22 to 33:41 }, name: "processItems", kind: CallExpression, context: Some("call_expression") },
        Usage { position: { 33:35 to 33:40 }, name: "users", kind: Identifier, context: Some("call_expression") },
    ],
    analysis_metadata: AnalysisMetadata {
        language: "TypeScript",
        total_lines: 34,
        analysis_timestamp: "now",
        lintric_version: "0.1.0",
    },
}
